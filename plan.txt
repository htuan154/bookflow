### GIAI ÄOáº N 1: NÃ‚NG Cáº¤P TRÃ TUá»† Há»˜I THOáº I & TÃŒM KIáº¾M NGá»® NGHÄ¨A (HOÃ€N Táº¤T)

#### 1.1. Xá»­ lÃ½ há»™i thoáº¡i Ä‘a lÆ°á»£t (Multi-turn Context Memory) âœ… DONE
* **Váº¥n Ä‘á» giáº£i quyáº¿t:** KhÃ¡ch há»i "á» trá»ng cÃ³ gÃ¬ ngon?" (áº©n chá»§ ngá»¯).
* **Giáº£i phÃ¡p ká»¹ thuáº­t:**
    * **Deep History Scan:** QuÃ©t ngÆ°á»£c 5 tin nháº¯n gáº§n nháº¥t Ä‘á»ƒ tÃ¬m `last_city` vÃ  `last_entity`.
    * **Context Trigger:** Tá»± Ä‘á»™ng kÃ­ch hoáº¡t cháº¿ Ä‘á»™ nhá»› khi gáº·p tá»« khÃ³a: "á»Ÿ trá»ng", "chá»— Ä‘Ã³", "nÃ³", "giÃ¡ bao nhiÃªu".
    * **Sticky Context:** Æ¯u tiÃªn giá»¯ ngá»¯ cáº£nh Ä‘á»‹a phÆ°Æ¡ng (Local Context) trÆ°á»›c khi tÃ¬m kiáº¿m toÃ n cá»¥c.

#### 1.2. TÃ­ch há»£p TÃ¬m kiáº¿m Vector (Semantic Search / RAG) âœ… DONE
* **Váº¥n Ä‘á» giáº£i quyáº¿t:** TÃ¬m kiáº¿m theo Ã½ nghÄ©a (VD: "cá»• kÃ­nh" -> ra "Äáº¡i Ná»™i") thay vÃ¬ Ä‘Ãºng tá»« khÃ³a.
* **Giáº£i phÃ¡p ká»¹ thuáº­t:**
    * **AI Auto-Tagging (Data Enrichment):** Sá»­ dá»¥ng Ollama Ä‘á»ƒ tá»± Ä‘á»™ng gáº¯n tháº» (Tags) cho dá»¯ liá»‡u khi náº¡p (PhÃ¢n loáº¡i rÃµ MÃ³n Äƒn vs Äá»‹a Ä‘iá»ƒm).
    * **2-Step Search Strategy (Chiáº¿n lÆ°á»£c 2 bÆ°á»›c):**
        1. **Strict Mode:** TÃ¬m Vector trong tá»‰nh hiá»‡n táº¡i (Threshold 0.20).
        2. **Global Mode:** Náº¿u khÃ´ng tháº¥y, tÃ¬m trÃªn toÃ n bá»™ dá»¯ liá»‡u (Threshold 0.22).
    * **Hybrid Fallback:** Náº¿u Vector tháº¥t báº¡i hoÃ n toÃ n, tá»± Ä‘á»™ng chuyá»ƒn sang Text Search truyá»n thá»‘ng Ä‘á»ƒ "vá»›t vÃ¡t" káº¿t quáº£.


### GIAI ÄOáº N 1.3: AUTO-SYNC API (XÃ‚Y Dá»°NG PIPELINE Dá»® LIá»†U Tá»° Äá»˜NG) ğŸš€ NEXT STEP

**Má»¥c tiÃªu:** Loáº¡i bá» viá»‡c cháº¡y script thá»§ cÃ´ng (`node scripts/sync...`). Admin chá»‰ cáº§n gá»i API lÃ  dá»¯ liá»‡u vÃ o tháº³ng Database vÃ  Vector Search.

**CÃ´ng viá»‡c cáº§n lÃ m:**
1.  **Táº¡o Controller má»›i (`data.controller.js`):**
    * API thÃªm Ä‘á»‹a Ä‘iá»ƒm: `POST /api/v1/data/place`
    * API thÃªm mÃ³n Äƒn: `POST /api/v1/data/dish`
2.  **TÃ­ch há»£p Logic AI:**
    * Khi nháº­n dá»¯ liá»‡u -> Gá»i Ollama sinh Tags (tÃ¡i sá»­ dá»¥ng logic tá»« `sync-real-data.js`).
    * Gá»i Ollama táº¡o Vector Embedding.
    * LÆ°u song song vÃ o MongoDB (Ä‘á»ƒ hiá»ƒn thá»‹) vÃ  Supabase (Ä‘á»ƒ tÃ¬m kiáº¿m).
3.  **Báº£o máº­t:** ThÃªm Key báº£o vá»‡ API (Admin Secret) Ä‘á»ƒ trÃ¡nh ngÆ°á»i láº¡ spam dá»¯ liá»‡u.

#### 1.4. CÆ¡ cháº¿ tá»± sá»­a lá»—i chÃ­nh táº£ (Typo Correction) ğŸ“‹ BACKLOG
* *MÃ´ táº£:* TÃ­ch há»£p module sá»­a lá»—i chÃ­nh táº£ trÆ°á»›c khi Ä‘Æ°a vÃ o NLU.
* *Tráº¡ng thÃ¡i:* Äáº©y lÃ¹i sau Phase 1.3 (vÃ¬ Vector Search hiá»‡n táº¡i Ä‘Ã£ chá»‹u lá»—i khÃ¡ tá»‘t).

---

### GIAI ÄOáº N 2: Má» Rá»˜NG TÃNH NÄ‚NG "TRAVEL AGENT" (Láº¬P Káº¾ HOáº CH & TIá»†N ÃCH)

#### 2.1. TÃ­ch há»£p dá»¯ liá»‡u thá»i gian thá»±c (Real-time API)
* Káº¿t ná»‘i OpenWeatherMap (Thá»i tiáº¿t) vÃ  Google Maps (Khoáº£ng cÃ¡ch).
* GiÃºp Bot tráº£ lá»i: "ÄÃ  Náºµng nay cÃ³ mÆ°a khÃ´ng?", "Tá»« Cáº§u Rá»“ng qua BÃ  NÃ  bao xa?".

#### 2.2. TÃ­nh nÄƒng Láº­p lá»‹ch trÃ¬nh tá»± Ä‘á»™ng (Itinerary Generator)
* PhÃ¢n loáº¡i Ä‘á»‹a Ä‘iá»ƒm: SÃ¡ng/Chiá»u/Tá»‘i.
* Thuáº­t toÃ¡n ghÃ©p Ä‘iá»ƒm tham quan dá»±a trÃªn vá»‹ trÃ­ Ä‘á»‹a lÃ½.

#### 2.3. Module Booking & GiÃ¡ vÃ©
* Má»Ÿ rá»™ng DB: ThÃªm giÃ¡ vÃ©, giá» má»Ÿ cá»­a.
* Thu tháº­p thÃ´ng tin Ä‘áº·t phÃ²ng (Slot Filling).

---

### GIAI ÄOáº N 3: Tá»I Æ¯U Váº¬N HÃ€NH & CÃ NHÃ‚N HÃ“A (ECOSYSTEM)

#### 3.1. XÃ¢y dá»±ng CMS Admin (Quáº£n trá»‹ dá»¯ liá»‡u)
* Giao diá»‡n Web Ä‘á»ƒ quáº£n lÃ½ Ä‘á»‹a Ä‘iá»ƒm (thay tháº¿ Postman).
* NÃºt báº¥m "Sync All Vectors" Ä‘á»ƒ lÃ m má»›i dá»¯ liá»‡u AI.

#### 3.2. CÃ¡ nhÃ¢n hÃ³a ngÆ°á»i dÃ¹ng (User Personalization)
* Nhá»› sá»Ÿ thÃ­ch ngÆ°á»i dÃ¹ng (ThÃ­ch sang cháº£nh hay bá»¥i báº·m).

#### 3.3. Analytics
* Thá»‘ng kÃª cÃ¢u há»i phá»• biáº¿n vÃ  cÃ¡c cÃ¢u Bot chÆ°a tráº£ lá»i Ä‘Æ°á»£c (Fallback).